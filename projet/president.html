<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Président</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
<script src="contract.js"></script>
</head>
<body>

<div class="container">
<h1>Interface Président</h1>

<button onclick="connect()">Connecter MetaMask</button>
<p id="compte"></p>

<input id="hash" placeholder="Hash du certificat">
<button onclick="signer()">Signer Président</button>
<button onclick="goHome()">Retour à l'accueil</button>
</div>

<script>
let web3, contract, account;

async function connect() {
  web3 = new Web3(window.ethereum);
  const acc = await ethereum.request({ method: "eth_requestAccounts" });
  account = acc[0];
  document.getElementById("compte").innerText = account;
  contract = new web3.eth.Contract(abi, contractAddress);

  const p = await contract.methods.president().call();
  if (account.toLowerCase() !== p.toLowerCase()) {
    alert("❌ Vous n'êtes pas le président");
  }
}

async function signer() {
  await contract.methods.signerParPresident(
    document.getElementById("hash").value
  ).send({ from: account });
}

function goHome() {
  window.location.href = "index.html";
}
</script>

</body>
</html>
